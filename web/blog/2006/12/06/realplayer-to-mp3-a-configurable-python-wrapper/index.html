<!DOCTYPE html>
<html lang="en" version="XHTML+RDFa 1.0" dir="ltr">
<head profile="http://www.w3.org/1999/xhtml/vocab">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../../../../../sites/files/jps/starberry_favicon.png" type="image/png" />
<meta name="generator" content="Drupal 7 (https://www.drupal.org)" />
<link rel="canonical" href="../realplayer-to-mp3-a-configurable-python-wrapper.html" />
<link rel="shortlink" href="../../../../../node/30.html" />
  <title>Realplayer to mp3: a configurable Python wrapper | J-P Stacey</title>
  <link type="text/css" rel="stylesheet" href="../../../../../sites/files/jps/css/css_xE-rWrJf-fncB6ztZfd2huxqgxu4WO-qwma6Xer30m4.css" media="all" />
<link type="text/css" rel="stylesheet" href="../../../../../sites/files/jps/css/css_jdej_Zz2sjg--A2C2aVJ-Qt5W-fI_fkFnsddutilsws.css" media="all" />
<link type="text/css" rel="stylesheet" href="../../../../../sites/files/jps/css/css_A3Qn9PgslsjDpW1HfgFuI26cQlhJ23E7y9wyYqpiJIA.css" media="all" />
<link type="text/css" rel="stylesheet" href="../../../../../sites/files/jps/css/css_0Heb-O6YY5Tn5xG4WrHtAAXZCtYk-eKiVo7PlP1bsg4.css" media="all" />
<link type="text/css" rel="stylesheet" href="../../../../../sites/files/jps/css/css_2THG1eGiBIizsWFeexsNe1iDifJ00QRS9uSd03rY9co.css" media="print" />

<!--[if lte IE 7]>
<link type="text/css" rel="stylesheet" href="/sites/default/themes/custom/barthes/css/ie.css?qfgo2z" media="all" />
<![endif]-->

<!--[if IE 6]>
<link type="text/css" rel="stylesheet" href="/sites/default/themes/custom/barthes/css/ie6.css?qfgo2z" media="all" />
<![endif]-->
  <script type="text/javascript" src="../../../../../sites/files/jps/js/js_vDrW3Ry_4gtSYaLsh77lWhWjIC6ml2QNkcfvfP5CVFs.js"></script>
<script type="text/javascript" src="../../../../../sites/files/jps/js/js_gPqjYq7fqdMzw8-29XWQIVoDSWTmZCGy9OqaHppNxuQ.js"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
(function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga");ga("create", "UA-4775024-1", {"cookieDomain":"auto"});ga("set", "anonymizeIp", true);ga("send", "pageview");
//--><!]]>
</script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"barthes","theme_token":"QAurQabRozzsQ6iBhicNa5-cN3R65xuNMjYbeLw1h18","js":{"misc\/jquery.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"sites\/all\/modules\/google_analytics\/googleanalytics.js":1,"0":1},"css":{"modules\/system\/system.base.css":1,"modules\/system\/system.menus.css":1,"modules\/system\/system.messages.css":1,"modules\/system\/system.theme.css":1,"modules\/comment\/comment.css":1,"sites\/all\/modules\/date\/date_api\/date.css":1,"sites\/all\/modules\/date\/date_popup\/themes\/datepicker.1.7.css":1,"modules\/field\/theme\/field.css":1,"sites\/all\/modules\/mollom\/mollom.css":1,"modules\/node\/node.css":1,"modules\/search\/search.css":1,"modules\/user\/user.css":1,"sites\/all\/modules\/views\/css\/views.css":1,"sites\/all\/modules\/media\/modules\/media_wysiwyg\/css\/media_wysiwyg.base.css":1,"sites\/all\/modules\/ctools\/css\/ctools.css":1,"public:\/\/geshi\/geshifilter-languages.css":1,"sites\/all\/modules\/geshifilter\/geshifilter.css":1,"themes\/bartik\/css\/layout.css":1,"themes\/bartik\/css\/style.css":1,"sites\/default\/themes\/custom\/barthes\/css\/colors.css":1,"sites\/default\/themes\/custom\/barthes\/css\/custom.css":1,"themes\/bartik\/css\/print.css":1,"sites\/default\/themes\/custom\/barthes\/css\/ie.css":1,"sites\/default\/themes\/custom\/barthes\/css\/ie6.css":1}},"googleanalytics":{"trackOutbound":1,"trackMailto":1,"trackDownload":1,"trackDownloadExtensions":"7z|aac|arc|arj|asf|asx|avi|bin|csv|doc(x|m)?|dot(x|m)?|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|msi|msp|pdf|phps|png|ppt(x|m)?|pot(x|m)?|pps(x|m)?|ppam|sld(x|m)?|thmx|qtm?|ra(m|r)?|sea|sit|tar|tgz|torrent|txt|wav|wma|wmv|wpd|xls(x|m|b)?|xlt(x|m)|xlam|xml|z|zip"}});
//--><!]]>
</script>
</head>
<body class="html not-front not-logged-in one-sidebar sidebar-second page-node page-node- page-node-30 node-type-blog" >
  <div id="skip-link">
    <a href="index.html#main-content" class="element-invisible element-focusable">Skip to main content</a>
  </div>
    <div id="page-wrapper"><div id="page">

  <div id="header" class="with-secondary-menu"><div class="section clearfix">

    
          <div id="name-and-slogan">

                              <div id="site-name">
              <strong>
                <a href="../../../../../index.html" title="Home" rel="home"><span>J-P Stacey</span></a>
              </strong>
            </div>
                  
                  <div id="site-slogan">
            Drupal, programming culture, gardening, cycling and the environment          </div>
        
      </div> <!-- /#name-and-slogan -->
    
    
    
          <div id="secondary-menu" class="navigation">
        <h2 class="element-invisible">Secondary menu</h2><ul id="secondary-menu-links" class="links inline clearfix"><li class="menu-7322 first"><a href="../../../../../cv.html" title="My curriculum vitae">CV</a></li>
<li class="menu-7320 last"><a href="../../../../../contact.html" title="">Contact me</a></li>
</ul>      </div> <!-- /#secondary-menu -->
    
  </div></div> <!-- /.section, /#header -->

  
  
  <div id="main-wrapper" class="clearfix"><div id="main" class="clearfix">

    
    
    <div id="content" class="column"><div class="section">
            <a id="main-content"></a>
                    <h1 class="title" id="page-title">
          Realplayer to mp3: a configurable Python wrapper        </h1>
                          <div class="tabs">
                  </div>
                          <div class="region region-content">
    <div id="block-system-main" class="block block-system">

    
  <div class="content">
    <div  class="ds-1col node node-blog node-promoted node-full view-mode-full clearfix">

  
  <div class="field field-name-post-date field-type-ds field-label-hidden"><div class="field-items"><div class="field-item even">Wednesday, December 6, 2006 - 20:55</div></div></div><div class="field field-name-field-body field-type-text-long field-label-hidden"><div class="field-items"><div class="field-item even"><p>It’s one of the worst-kept tech secrets in the world, but Real Audio streams can be downloaded using software such as <code>mplayer</code> and then converted to MP3 format with <code>lame</code>. Both of these are available in Ubuntu using the non-Ubuntu package manager <a href="http://www.getautomatix.com/">Automatix</a>. The possibility of doing this conversion implies that, although the BBC offer all their programs in Real Audio and only a few as podcasts, you can in principle put any you like on your portable music device.</p>
<p>Similar solutions abound on the web: Tom Taylor has <a title="How to rip BBC radio streams to MP3" href="http://www.tomtaylor.co.uk/blog/2006/09/01/how-to-rip-bbc-radio-streams-to-mp3/">a method involving <code>mencoder</code></a>; other methods can be found <a title="Convert Real Audio to mp3" href="http://www.macosxhints.com/article.php?story=20050130184054216">all over the place</a>. However, these all involve a bit of <i>ad hoc</i> command-line intervention, or scripts which aren’t terribly configurable. There are GUI and proprietary commands, but they tend not to offer great support for command-line and therefore scheduled operation.</p>
<p>I’ve knocked together a Python application called <code>rmrip</code>: it’s available in a tar file from <a href="/blog/files/code/rmrip.tgz.html">http://www.jpstacey.info/blog/files/code/rmrip.tgz</a>. If you unzip this to a directory you’ll find a number of <code>.py</code> files and a <code>config.conf</code> configuration file. Edit <code>config.conf</code> to match your system requirements and stream preferences, make sure <code>rmrip.py</code> is executable, then run it. mp3s should eventually appear in a subdirectory called YYYYMMDD unless you configure the system otherwise.</p>
<p>The application can in principle be run from a cronjob, so it could tick over late at night when everyone’s internet is otherwise nice and quiet. In addition, conversion works via a <a href="index.html">named pipe</a>, which is a funky way of piping the intermediary, enormous <code>.wav</code> audio file straight into <code>lame</code>, rather than saving it to disk. This does unfortunately restrict the application to non-Windows machines, but it’s a great help for audiophiles with limited disk space: <code>.ra</code> and <code>.mp3</code> files can be in the hundreds of megabytes for many-hour programmes, but the associated <code>.wav</code> would take up gigabytes.</p>
<p>Current requirements include (please give any feedback on this!):</p>
<ul><li><code>mplayer</code> and <code>lame</code>: their locations are configurable</li>
<li>The <code>subprocess</code> module in Python</li>
</ul><p>Current file types supported:</p>
<ul><li>Direct rtsp://….ra Real Audio stream links</li>
<li>http://….ram references to Real Audio streams</li>
<li>http://….rpm Real Audio playlists (BBC so far only format tested)</li>
</ul><p>To get you started, <a href="http://dave.org.uk/">dave.org.uk</a> has provided information on <a href="http://dave.org.uk/streams">how to get stream information</a> using a standalone Python program, and also has potentially out-of-date static pages detailing the current BBC streams.</p>
</div></div></div><div id="comments" class="comment-wrapper">
          <h2 class="title">Comments</h2>
      
  <a id="comment-14"></a>
<div class="comment comment-by-anonymous clearfix">

  <div class="attribution">

    
    <div class="submitted">
      <p class="commenter-name">
        <a href="http://www.tomtaylor.co.uk" rel="nofollow" class="username">Tom Taylor (not verified)</a>      </p>
      <p class="comment-time">
        Wed, 06/12/2006 - 22:11      </p>
      <p class="comment-permalink">
        <a href="../../../../../comment/14.html#comment-14" class="permalink" rel="bookmark">Permalink</a>      </p>
    </div>
  </div>

  <div class="comment-text">
    <div class="comment-arrow"></div>

    
    <div style='display: none;'>    <h3><a href="../../../../../comment/14.html#comment-14" class="permalink" rel="bookmark">Very cool, I&#039;ve been getting</a></h3>
    </div>
    <div class="content">
      <div class="field field-name-comment-body field-type-text-long field-label-hidden"><div class="field-items"><div class="field-item even"><p>Very cool, I've been getting into Python a bit recently - I'll check this out.</p>
</div></div></div>          </div> <!-- /.content -->

      </div> <!-- /.comment-text -->
</div>
<a id="comment-15"></a>
<div class="comment comment-by-anonymous clearfix">

  <div class="attribution">

    
    <div class="submitted">
      <p class="commenter-name">
        <span class="username">Matt (not verified)</span>      </p>
      <p class="comment-time">
        Fri, 26/01/2007 - 20:42      </p>
      <p class="comment-permalink">
        <a href="../../../../../comment/15.html#comment-15" class="permalink" rel="bookmark">Permalink</a>      </p>
    </div>
  </div>

  <div class="comment-text">
    <div class="comment-arrow"></div>

    
    <div style='display: none;'>    <h3><a href="../../../../../comment/15.html#comment-15" class="permalink" rel="bookmark">This is lovely. Is it</a></h3>
    </div>
    <div class="content">
      <div class="field field-name-comment-body field-type-text-long field-label-hidden"><div class="field-items"><div class="field-item even"><p>This is lovely. Is it possible to pass the configuration file as an argument? I'd really like to cron this every few days with a different list of jobs.</p>
<p>Python isn't my bag so if I start to hack it then either,</p>
<p>i) It'll get badly munged<br />
ii) It'll get re-written in PHP</p>
<p>Maybe I'll try i) and find out if it already does this already..</p>
<p>Matt.</p>
</div></div></div>          </div> <!-- /.content -->

      </div> <!-- /.comment-text -->
</div>
<a id="comment-16"></a>
<div class="comment comment-by-anonymous clearfix">

  <div class="attribution">

    
    <div class="submitted">
      <p class="commenter-name">
        <span class="username">jps (not verified)</span>      </p>
      <p class="comment-time">
        Mon, 29/01/2007 - 19:53      </p>
      <p class="comment-permalink">
        <a href="../../../../../comment/16.html#comment-16" class="permalink" rel="bookmark">Permalink</a>      </p>
    </div>
  </div>

  <div class="comment-text">
    <div class="comment-arrow"></div>

    
    <div style='display: none;'>    <h3><a href="../../../../../comment/16.html#comment-16" class="permalink" rel="bookmark">Hi,

thanks very much for the</a></h3>
    </div>
    <div class="content">
      <div class="field field-name-comment-body field-type-text-long field-label-hidden"><div class="field-items"><div class="field-item even"><p>Hi,</p>
<p>thanks very much for the feedback. I think I was holding off putting any command-line arguments in place as once you do that it's hard to change your mind at a later date if anyone's actually using it by then.</p>
<p>That does seem a reasonable addition to the functionality, though, so I'll look into it when I have my old, cranky development machine up and running.</p>
<p>In the mean time, if you edit <code>rmrip.py</code> and change:</p>
<blockquote><p><code># Get config and parse into config and meta config<br />
conf = config.load_config()</code></p></blockquote>
<p>to:</p>
<blockquote><p><code># Get config and parse into config and meta config<br />
conf = config.load_config("my_file/location.whatever")</code></p></blockquote>
<p>then that should override the default value.</p>
</div></div></div>          </div> <!-- /.content -->

      </div> <!-- /.comment-text -->
</div>
<a id="comment-17"></a>
<div class="comment comment-by-anonymous clearfix">

  <div class="attribution">

    
    <div class="submitted">
      <p class="commenter-name">
        <a href="http://www.bargolf.net" rel="nofollow" class="username">Matt (not verified)</a>      </p>
      <p class="comment-time">
        Thu, 08/02/2007 - 16:32      </p>
      <p class="comment-permalink">
        <a href="../../../../../comment/17.html#comment-17" class="permalink" rel="bookmark">Permalink</a>      </p>
    </div>
  </div>

  <div class="comment-text">
    <div class="comment-arrow"></div>

    
    <div style='display: none;'>    <h3><a href="../../../../../comment/17.html#comment-17" class="permalink" rel="bookmark">What I actually did was in</a></h3>
    </div>
    <div class="content">
      <div class="field field-name-comment-body field-type-text-long field-label-hidden"><div class="field-items"><div class="field-item even"><p>What I actually did was in the crontab CD into a directory with that particular day's config.conf and then run rmrip from the directory that was put in. e.g.</p>
<p>0 2 * * 2 cd $HOME/rmrip/tuesday; $HOME/rmrip/rmrip.py<br />
0 2 * * 3 cd $HOME/rmrip/wednesday; $HOME/rmrip/rmrip.py</p>
<p>Though I think</p>
<p>0 2 * * 2 $HOME/rmrip/rmrip.py tuesday.conf<br />
0 2 * * 3 $HOME/rmrip/wednesday wednesday.conf</p>
<p>would be neater. So I'll have to read a python manual and work out how to get argv[1] and pass that into config.load_config</p>
</div></div></div>          </div> <!-- /.content -->

      </div> <!-- /.comment-text -->
</div>
<a id="comment-18"></a>
<div class="comment comment-by-anonymous clearfix">

  <div class="attribution">

    
    <div class="submitted">
      <p class="commenter-name">
        <a href="http://www.tomtaylor.co.uk/blog/2007/04/17/play-it-again/" rel="nofollow" class="username">Play It Again |... (not verified)</a>      </p>
      <p class="comment-time">
        Tue, 17/04/2007 - 08:57      </p>
      <p class="comment-permalink">
        <a href="../../../../../comment/18.html#comment-18" class="permalink" rel="bookmark">Permalink</a>      </p>
    </div>
  </div>

  <div class="comment-text">
    <div class="comment-arrow"></div>

    
    <div style='display: none;'>    <h3><a href="../../../../../comment/18.html#comment-18" class="permalink" rel="bookmark">[...] Seb James dropped me an</a></h3>
    </div>
    <div class="content">
      <div class="field field-name-comment-body field-type-text-long field-label-hidden"><div class="field-items"><div class="field-item even"><p>[...] Seb James dropped me an email to say that’s he’d enhanced my BBC Radio recording script and added Ogg Vorbis encoding as well as cleverer file handling. He’s named it ‘listenagain’, and I’ve included the full script below. This follows JP Stacey’s Python wrapper, using rmrip, which skips the intermediate wav file and allows the use of a configuration file. [...]</p>
</div></div></div>          </div> <!-- /.content -->

      </div> <!-- /.comment-text -->
</div>

  </div>
</div>

  </div>
</div>
  </div>
      
    </div></div> <!-- /.section, /#content -->

          <div id="sidebar-second" class="column sidebar"><div class="section">
          <div class="region region-sidebar-second">
    <div id="block-block-7" class="block block-block">

    <h2>I&#039;m a Drupal Association member!</h2>
  
  <div class="content">
    <div style="margin: -15px 0"><a href="https://drupal.org/user/130486"><img src="https://association.drupal.org/files/Drupal_Association_ind_member_217_0.png" alt="My individual membership of the Drupal Association" title="You can view my DA membership on drupal.org" width="168" height="168" /></a></div>
  </div>
</div>
<div id="block-block-10" class="block block-block">

    <h2>Drupal 8 API tutorials</h2>
  
  <div class="content">
    <p>Want to learn about the Drupal 8 APIs, with worked examples? <a href="/d8api.html">Follow my series of tutorials</a>, covering routing, caching, entities, config and much more!</p>
  </div>
</div>
<div id="block-stateblock-stateblock" class="block block-stateblock">

    <h2>Want to hire me?</h2>
  
  <div class="content">
    <a href="../../../../../contact.html"><section class="state-no">
  <header>I'm currently</header>
  <section class="state-description">fully booked</section>
  <footer>for freelance work. But you can click here to contact me!</footer>
</section></a>  </div>
</div>
<div id="block-ds-extras-blogpost-secondary-nav" class="block block-ds-extras">

    
  <div class="content">
    <div class="field field-name-taxonomy-vocabulary-6 field-type-taxonomy-term-reference field-label-above clearfix"><h3 class="field-label">Blog category: </h3><ul class="links"><li class="taxonomy-term-reference-0"><a href="../../../../../category/wordpress-category/configuration.html">configuration</a>, <a href="../../../../../category/wordpress-category/formats.html">formats</a>, <a href="../../../../../category/wordpress-category/hacking.html">hacking</a>, <a href="../../../../../category/wordpress-category/projects.html">projects</a></li></ul></div><div class="field field-name-taxonomy-vocabulary-7 field-type-taxonomy-term-reference field-label-above clearfix"><h3 class="field-label">Tags: </h3><ul class="links"><li class="taxonomy-term-reference-0"><a href="../../../../../category/wordpress-tag/lame.html">lame</a>, <a href="../../../../../category/wordpress-tag/mplayer.html">mplayer</a>, <a href="../../../../../category/wordpress-tag/python.html">python</a>, <a href="../../../../../category/wordpress-tag/bbc.html">bbc</a>, <a href="../../../../../category/wordpress-tag/configurable.html">configurable</a>, <a href="../../../../../category/wordpress-tag/mp3.html">mp3</a>, <a href="../../../../../category/wordpress-tag/radio.html">radio</a>, <a href="../../../../../category/wordpress-tag/realaudio.html">realaudio</a>, <a href="../../../../../category/wordpress-tag/realplayer.html">realplayer</a>, <a href="../../../../../category/wordpress-tag/rip.html">rip</a>, <a href="../../../../../category/wordpress-tag/rmrip.html">rmrip</a></li></ul></div>  </div>
</div>
<div id="block-views-recent-blog-block-1" class="block block-views">

    <h2>Recent blogposts</h2>
  
  <div class="content">
    <div class="view view-recent-blog view-id-recent_blog view-display-id-block_1 view-dom-id-eaa997d80610da6d019f56828d53da64">
        
  
  
      <div class="view-content">
        <ul>
    <li class="first odd">
      
      <h3>
  
    
      <a href="../../../../2017-07-21/altering-length-drupal-8-text-field-contains-data.html">Altering the length of a Drupal 8 text field that contains data</a>
      </h3>
  

      <div>
  
    
      Friday, July 21, 2017 - 11:31
      </div>
  
    </li>
      <li class="even">
      
      <h3>
  
    
      <a href="../../../../2017-06-02/menagerie-testing-behavioural-unit-system-smoke-regression-oh-my.html">A menagerie of testing: behavioural, unit, system, smoke, regression, oh my!</a>
      </h3>
  

      <div>
  
    
      Friday, June 2, 2017 - 10:11
      </div>
  
    </li>
      <li class="last odd">
      
      <h3>
  
    
      <a href="../../../../2017-05-30/including-javascript-behat-tests-all-inside-headless-virtual-machine.html">Including Javascript in Behat tests, all inside a headless, virtual machine</a>
      </h3>
  

      <div>
  
    
      Tuesday, May 30, 2017 - 16:51
      </div>
  
    </li>
    </ul>
    </div>
  
  
  
      
<div class="more-link">
  <a href="../../../../../blog_view.html">
    All blogposts  </a>
</div>
  
  
  
</div>  </div>
</div>
<div id="block-block-5" class="block block-block">

    <h2>About me</h2>
  
  <div class="content">
    <p>I'm J-P Stacey, and I'm a freelance technical developer and software architect, working with <a href="http://drupal.org/">Drupal</a>, Javascript, Symfony, PHP and devops, with experience in project and process management and an emphasis on usability.</p>
<p>I live in the <a href="http://gov.uk">UK</a>; my website is self-hosted on <a href="http://bigv.io">bigv.io</a>; my email is hosted by <a href="http://mail.google.com">Google</a>, and that's also what I use to share files. <small>(<a href="https://data-jurisdiction.org/country/GB">More info</a>|<a href="/blog/2013-08-20/what-jurisdiction-am-i-in.html">What is this?</a>)</small></p>
  </div>
</div>
<div id="block-menu-secondary-menu" class="block block-menu">

    <h2>Find me elsewhere</h2>
  
  <div class="content">
    <ul class="menu clearfix"><li class="first leaf"><a href="http://twitter.com/mphield" title="My commercial account on Twitter">Company @ Twitter</a></li>
<li class="leaf"><a href="http://drupal.org/user/130486" title="Drupal user #130486: woohoo!">Drupal @ d.o</a></li>
<li class="leaf"><a href="http://github.com/jpstacey" title="My code repositories on Github">Code @ Github</a></li>
<li class="leaf"><a href="http://flickr.com/photos/eustatius" title="My photos on Flickr">Photos @ Flickr</a></li>
<li class="last leaf"><a href="http://pinboard.in/u:jpstacey" title="My links on the Pinboard bookmarking site">Links @ Pinboard</a></li>
</ul>  </div>
</div>
  </div>
      </div></div> <!-- /.section, /#sidebar-second -->
    
  </div></div> <!-- /#main, /#main-wrapper -->

  
  <div id="footer-wrapper"><div class="section">

    
    
  </div></div> <!-- /.section, /#footer-wrapper -->

</div></div> <!-- /#page, /#page-wrapper -->
  </body>
</html>
