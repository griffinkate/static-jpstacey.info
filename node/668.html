<!DOCTYPE html>
<html lang="en" version="XHTML+RDFa 1.0" dir="ltr">
<head profile="http://www.w3.org/1999/xhtml/vocab">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/files/jps/starberry_favicon.png" type="image/png" />
<meta name="generator" content="Drupal 7 (https://www.drupal.org)" />
<link rel="canonical" href="../blog/2016-11-18/drupal-8-api-types-information-drupal.html" />
<link rel="shortlink" href="668.html" />
  <title>Drupal 8 API: types of information in Drupal | J-P Stacey</title>
  <link type="text/css" rel="stylesheet" href="../sites/files/jps/css/css_xE-rWrJf-fncB6ztZfd2huxqgxu4WO-qwma6Xer30m4.css" media="all" />
<link type="text/css" rel="stylesheet" href="../sites/files/jps/css/css_jdej_Zz2sjg--A2C2aVJ-Qt5W-fI_fkFnsddutilsws.css" media="all" />
<link type="text/css" rel="stylesheet" href="../sites/files/jps/css/css_A3Qn9PgslsjDpW1HfgFuI26cQlhJ23E7y9wyYqpiJIA.css" media="all" />
<link type="text/css" rel="stylesheet" href="../sites/files/jps/css/css_0Heb-O6YY5Tn5xG4WrHtAAXZCtYk-eKiVo7PlP1bsg4.css" media="all" />
<link type="text/css" rel="stylesheet" href="../sites/files/jps/css/css_2THG1eGiBIizsWFeexsNe1iDifJ00QRS9uSd03rY9co.css" media="print" />

<!--[if lte IE 7]>
<link type="text/css" rel="stylesheet" href="http://jpstacey.lndo.site/sites/default/themes/custom/barthes/css/ie.css?qfgo2z" media="all" />
<![endif]-->

<!--[if IE 6]>
<link type="text/css" rel="stylesheet" href="http://jpstacey.lndo.site/sites/default/themes/custom/barthes/css/ie6.css?qfgo2z" media="all" />
<![endif]-->
  <script type="text/javascript" src="../sites/files/jps/js/js_vDrW3Ry_4gtSYaLsh77lWhWjIC6ml2QNkcfvfP5CVFs.js"></script>
<script type="text/javascript" src="../sites/files/jps/js/js_gPqjYq7fqdMzw8-29XWQIVoDSWTmZCGy9OqaHppNxuQ.js"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
(function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga");ga("create", "UA-4775024-1", {"cookieDomain":"auto"});ga("set", "anonymizeIp", true);ga("send", "pageview");
//--><!]]>
</script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"barthes","theme_token":"aSOZvuD-KjxqZyVMcbMIUtMkwHD0HSz-sAlFi7u_OhY","js":{"misc\/jquery.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"sites\/all\/modules\/google_analytics\/googleanalytics.js":1,"0":1},"css":{"modules\/system\/system.base.css":1,"modules\/system\/system.menus.css":1,"modules\/system\/system.messages.css":1,"modules\/system\/system.theme.css":1,"modules\/comment\/comment.css":1,"sites\/all\/modules\/date\/date_api\/date.css":1,"sites\/all\/modules\/date\/date_popup\/themes\/datepicker.1.7.css":1,"modules\/field\/theme\/field.css":1,"sites\/all\/modules\/mollom\/mollom.css":1,"modules\/node\/node.css":1,"modules\/search\/search.css":1,"modules\/user\/user.css":1,"sites\/all\/modules\/views\/css\/views.css":1,"sites\/all\/modules\/media\/modules\/media_wysiwyg\/css\/media_wysiwyg.base.css":1,"sites\/all\/modules\/ctools\/css\/ctools.css":1,"public:\/\/geshi\/geshifilter-languages.css":1,"sites\/all\/modules\/geshifilter\/geshifilter.css":1,"themes\/bartik\/css\/layout.css":1,"themes\/bartik\/css\/style.css":1,"sites\/default\/themes\/custom\/barthes\/css\/colors.css":1,"sites\/default\/themes\/custom\/barthes\/css\/custom.css":1,"themes\/bartik\/css\/print.css":1,"sites\/default\/themes\/custom\/barthes\/css\/ie.css":1,"sites\/default\/themes\/custom\/barthes\/css\/ie6.css":1}},"googleanalytics":{"trackOutbound":1,"trackMailto":1,"trackDownload":1,"trackDownloadExtensions":"7z|aac|arc|arj|asf|asx|avi|bin|csv|doc(x|m)?|dot(x|m)?|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|msi|msp|pdf|phps|png|ppt(x|m)?|pot(x|m)?|pps(x|m)?|ppam|sld(x|m)?|thmx|qtm?|ra(m|r)?|sea|sit|tar|tgz|torrent|txt|wav|wma|wmv|wpd|xls(x|m|b)?|xlt(x|m)|xlam|xml|z|zip"}});
//--><!]]>
</script>
</head>
<body class="html not-front not-logged-in one-sidebar sidebar-second page-node page-node- page-node-668 node-type-blog" >
  <div id="skip-link">
    <a href="668.html#main-content" class="element-invisible element-focusable">Skip to main content</a>
  </div>
    <div id="page-wrapper"><div id="page">

  <div id="header" class="with-secondary-menu"><div class="section clearfix">

    
          <div id="name-and-slogan">

                              <div id="site-name">
              <strong>
                <a href="../index.html" title="Home" rel="home"><span>J-P Stacey</span></a>
              </strong>
            </div>
                  
                  <div id="site-slogan">
            Drupal, programming culture, gardening, cycling and the environment          </div>
        
      </div> <!-- /#name-and-slogan -->
    
    
    
          <div id="secondary-menu" class="navigation">
        <h2 class="element-invisible">Secondary menu</h2><ul id="secondary-menu-links" class="links inline clearfix"><li class="menu-7322 first"><a href="../cv.html" title="My curriculum vitae">CV</a></li>
<li class="menu-7320 last"><a href="../contact.html" title="">Contact me</a></li>
</ul>      </div> <!-- /#secondary-menu -->
    
  </div></div> <!-- /.section, /#header -->

  
  
  <div id="main-wrapper" class="clearfix"><div id="main" class="clearfix">

    
    
    <div id="content" class="column"><div class="section">
            <a id="main-content"></a>
                    <h1 class="title" id="page-title">
          Drupal 8 API: types of information in Drupal        </h1>
                          <div class="tabs">
                  </div>
                          <div class="region region-content">
    <div id="block-system-main" class="block block-system">

    
  <div class="content">
    <div  class="ds-1col node node-blog node-promoted node-full view-mode-full clearfix">

  
  <div class="field field-name-post-date field-type-ds field-label-hidden"><div class="field-items"><div class="field-item even">Friday, November 18, 2016 - 10:32</div></div></div><div class="field field-name-field-body field-type-text-long field-label-hidden"><div class="field-items"><div class="field-item even"><h2>Pre-requisites</h2>
<p><em>None.</em></p>
<h2>What does a CMS need to keep track of?</h2>
<p><strong>Content</strong> management is the whole point of a CMS: to be a (c)ontent-(m)anaging (s)ystem. Early CMSes did merely keep track of content—events, blogposts, comments—but as sites grew in complexity, CMSes also needed to work out <em>how</em> that content should be displayed.</p>
<h2>The three complicating factors</h2>
<p>How content appears depends on:</p>
<ol><li>different situations e.g. as full page or as a teaser</li>
<li>different site visitors e.g. an administrator or a member of the public</li>
<li>and changing over time e.g. as regular tasks run and need to remember when they last ran.</li>
</ol><p>This applies three sets of conditions on content, and each set of conditions needs information to be stored, to inform the CMS's decision on what to do.</p>
<h2>The three new required sources of information</h2>
<p>Respectively, we can tackle these three complicating factors, by defining three new sources of information:</p>
<p><strong>1. Configuration</strong> is the name given to information required by the site to make decisions about content presentation and general site running. How an event's location field should be displayed—as a dynamic map, or just as longitude and latitude coordinates—is configuration, as is the account number on Google Analytics, which gets notified every time an event is viewed. The email address to contact for site updates is also configuration, as is whether or not updates should be checked at all. Even whether or not a site is in maintenance mode, is configuration. Configuration is characterized by its <em>semi-permanence</em>—it rarely changes, and is usually only changed by an administrator—and by its <em>semantic specificity</em>—related configuration options can be bundled together and named based on their meaning.</p>
<p><strong>2. Session</strong> is the name given to information required by the site to make decisions about what each site visitor should be able to see and do. Whether a site visitor is logged in, and if so then what roles they have, is determined by each site visitor's unique session. Temporary information, relating to the current site visitor only, can be stored in the session, although it may be lost if the site visitor logs out. Session is characterized by its <em>temporariness</em>—it only persists as long as a given site visitor's login, and disappears along with any browser cookies—and by its <em>visitor specificity</em>—information in each session is only available to the site visitor whose session it is.</p>
<p><strong>3. State</strong> is the name given to information required by the site to make decisions about content presentation and general site running, which might change over time. When the regular "cron" task is run to perform various administrative functions—updating the site search, processing any queued tasks in bulk—it references the last time it was run, which is stored in state. Once it has finished running, the cron task updates this time stored in state. When caches are cleared, and Drupal packages up all CSS files into a single file to improve network performance, then each page needs to know where to find this file, and so its filename is stored in state. State is characterized by its <em>temporariness</em>—it only persists until Drupal or some user action causes it to be changed, and then the precise new content of state is decided by Drupal itself, rather than storing user input—and its <em>semantic specificity</em>—like configuration, each state option is named based on its meaning.</p>
<p>Including content itself, then, we have <em>four</em> sources of information that Drupal needs to have knowledge of, and be able to manipulate and display.</p>
<h2>Side-by-side comparison</h2>
<p>It might be useful to provide a comparison table, condensing the above information and more, to quickly demonstrate the differences between the four types of information in Drupal. While the distinction between the four types might be a bit vaguer in practice—when is something state and not configuration?—then the following nonetheless tries to distinguish between them for most circumstances:</p>
<table><caption style="text-align: center; margin-bottom: 0.3em">Different types of information in Drupal, compared side by side.</caption>
<thead><tr><th>Type</th>
<th>Lifetime</th>
<th>Changed by</th>
<th>Identified by</th>
<th>Accessed using</th>
</tr></thead><tbody><tr><th>Content</th>
<td>Semi-permanent</td>
<td>Maintainer (editor)</td>
<td>Numeric* (or UUID)</td>
<td><a href="http://www.jpstacey.info/blog/2016-10-26/drupal-8-api-entities">Entity API</a></td>
</tr><tr><th>Session</th>
<td>Login/browser</td>
<td>Visitor's actions</td>
<td>Visitor's cookie</td>
<td>Session manager service</td>
</tr><tr><th>State</th>
<td>Varies</td>
<td>Drupal itself*</td>
<td>Name</td>
<td><a href="http://www.jpstacey.info/blog/2016-11-28/drupal-8-api-state">State API</a></td>
</tr><tr><th>Configuration</th>
<td>Semi-permanent</td>
<td>Maintainer (admin)</td>
<td>Name</td>
<td><a href="http://www.jpstacey.info/blog/2016-12-01/drupal-8-api-configuration">Config API</a></td>
</tr></tbody></table><p><small><em>*Usually: this comparison table is meant to be a very generalized overview, so there will always be exceptions.</em></small></p>
<p>The key introduction in this table, compared to our discussion above, is the right-hand column of APIs. We'll discuss these later and so don't cover them now; but as we cover them, we'll link back here.</p>
<p>It's tempting to include another line in this table, for <strong>Cacheing</strong>. Historically, it's been difficult to work out where state should live in Drupal. Configuration has always been something that, in principle and practice, should be exportable to form a kernel of "how your site should behave": this export could be used to partly restore a damaged website, or re-used in a different website to be able to share configuration that was hard to achieve in the first place. Because state can change arbitrarily often, it hasn't suited being stored alongside configuration, as it would make these exports look (falsely) out of date.</p>
<p>For this reason, state has in the past often ended up in the cache, as this seemed to suit its volatility. However, this puts strain on any caching strategy, because caching should be fundamentally a way to improve performance, and the site should work fine without it. While the state of any given moment is volatile, state as a long-term concept still does need to exist in some form or another. Drupal 8 has finally split it out from caching, and so we don't treat the cache as an information resource, only as a performance tactic.</p>
<h2>What you should see</h2>
<p>Most of these tutorial blogposts end in a demonstration you can implement yourself. However, the key point of information storage in Drupal is that the four types are both different in meaning and use, and also different in how you access them. So each of the four APIs will have its own demonstration, and we don't repeat those here.</p>
<p>But congratulations! you have learnt about these different types of information in Drupal.</p>
<h2>Further reading etc.</h2>
<ul><li><a href="https://api.drupal.org/api/drupal/core%21core.api.php/group/info_types/8.2.x">Drupal 8 API: information types</a></li>
<li><a href="http://www.jpstacey.info/blog/2016-10-26/drupal-8-api-entities">Entity API</a></li>
</ul></div></div></div><div id="comments" class="comment-wrapper">
  
  
  </div>
</div>

  </div>
</div>
  </div>
      
    </div></div> <!-- /.section, /#content -->

          <div id="sidebar-second" class="column sidebar"><div class="section">
          <div class="region region-sidebar-second">
    <div id="block-block-7" class="block block-block">

    <h2>I&#039;m a Drupal Association member!</h2>
  
  <div class="content">
    <div style="margin: -15px 0"><a href="https://drupal.org/user/130486"><img src="https://association.drupal.org/files/Drupal_Association_ind_member_217_0.png" alt="My individual membership of the Drupal Association" title="You can view my DA membership on drupal.org" width="168" height="168" /></a></div>
  </div>
</div>
<div id="block-block-10" class="block block-block">

    <h2>Drupal 8 API tutorials</h2>
  
  <div class="content">
    <p>Want to learn about the Drupal 8 APIs, with worked examples? <a href="http://www.jpstacey.info/d8api">Follow my series of tutorials</a>, covering routing, caching, entities, config and much more!</p>
  </div>
</div>
<div id="block-stateblock-stateblock" class="block block-stateblock">

    <h2>Want to hire me?</h2>
  
  <div class="content">
    <a href="../contact.html"><section class="state-no">
  <header>I'm currently</header>
  <section class="state-description">fully booked</section>
  <footer>for freelance work. But you can click here to contact me!</footer>
</section></a>  </div>
</div>
<div id="block-ds-extras-blogpost-secondary-nav" class="block block-ds-extras">

    
  <div class="content">
    <div class="field field-name-taxonomy-vocabulary-6 field-type-taxonomy-term-reference field-label-above clearfix"><h3 class="field-label">Blog category: </h3><ul class="links"><li class="taxonomy-term-reference-0"><a href="../category/wordpress-category/framework.html">framework</a>, <a href="../category/wordpress-category/tutorials.html">tutorials</a></li></ul></div><div class="field field-name-taxonomy-vocabulary-7 field-type-taxonomy-term-reference field-label-above clearfix"><h3 class="field-label">Tags: </h3><ul class="links"><li class="taxonomy-term-reference-0"><a href="../category/tags/d8apibg.html">d8api:bg</a>, <a href="../category/tags/d8api.html">d8api</a></li></ul></div>  </div>
</div>
<div id="block-views-recent-blog-block-1" class="block block-views">

    <h2>Recent blogposts</h2>
  
  <div class="content">
    <div class="view view-recent-blog view-id-recent_blog view-display-id-block_1 view-dom-id-57e709e39e95770ad01bcf550e10e76f">
        
  
  
      <div class="view-content">
        <ul>
    <li class="first odd">
      
      <h3>
  
    
      <a href="../blog/2017-07-21/altering-length-drupal-8-text-field-contains-data.html">Altering the length of a Drupal 8 text field that contains data</a>
      </h3>
  

      <div>
  
    
      Friday, July 21, 2017 - 11:31
      </div>
  
    </li>
      <li class="even">
      
      <h3>
  
    
      <a href="../blog/2017-06-02/menagerie-testing-behavioural-unit-system-smoke-regression-oh-my.html">A menagerie of testing: behavioural, unit, system, smoke, regression, oh my!</a>
      </h3>
  

      <div>
  
    
      Friday, June 2, 2017 - 10:11
      </div>
  
    </li>
      <li class="last odd">
      
      <h3>
  
    
      <a href="../blog/2017-05-30/including-javascript-behat-tests-all-inside-headless-virtual-machine.html">Including Javascript in Behat tests, all inside a headless, virtual machine</a>
      </h3>
  

      <div>
  
    
      Tuesday, May 30, 2017 - 16:51
      </div>
  
    </li>
    </ul>
    </div>
  
  
  
      
<div class="more-link">
  <a href="../blog_view.html">
    All blogposts  </a>
</div>
  
  
  
</div>  </div>
</div>
<div id="block-block-5" class="block block-block">

    <h2>About me</h2>
  
  <div class="content">
    <p>I'm J-P Stacey, and I'm a freelance technical developer and software architect, working with <a href="http://drupal.org/">Drupal</a>, Javascript, Symfony, PHP and devops, with experience in project and process management and an emphasis on usability.</p>
<p>I live in the <a href="http://gov.uk">UK</a>; my website is self-hosted on <a href="http://bigv.io">bigv.io</a>; my email is hosted by <a href="http://mail.google.com">Google</a>, and that's also what I use to share files. <small>(<a href="https://data-jurisdiction.org/country/GB">More info</a>|<a href="http://www.jpstacey.info/blog/2013-08-20/what-jurisdiction-am-i-in">What is this?</a>)</small></p>
  </div>
</div>
<div id="block-menu-secondary-menu" class="block block-menu">

    <h2>Find me elsewhere</h2>
  
  <div class="content">
    <ul class="menu clearfix"><li class="first leaf"><a href="http://twitter.com/mphield" title="My commercial account on Twitter">Company @ Twitter</a></li>
<li class="leaf"><a href="http://drupal.org/user/130486" title="Drupal user #130486: woohoo!">Drupal @ d.o</a></li>
<li class="leaf"><a href="http://github.com/jpstacey" title="My code repositories on Github">Code @ Github</a></li>
<li class="leaf"><a href="http://flickr.com/photos/eustatius" title="My photos on Flickr">Photos @ Flickr</a></li>
<li class="last leaf"><a href="http://pinboard.in/u:jpstacey" title="My links on the Pinboard bookmarking site">Links @ Pinboard</a></li>
</ul>  </div>
</div>
  </div>
      </div></div> <!-- /.section, /#sidebar-second -->
    
  </div></div> <!-- /#main, /#main-wrapper -->

  
  <div id="footer-wrapper"><div class="section">

    
    
  </div></div> <!-- /.section, /#footer-wrapper -->

</div></div> <!-- /#page, /#page-wrapper -->
  </body>
</html>
